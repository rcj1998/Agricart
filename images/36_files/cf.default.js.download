
(function(require,define){var DOMAIN,CUSTOMER,ZOTABOX,DOMAIN_STATIC_DIR,DOMAIN_CACHE_DIR;var Stats;var _,async,Class,Widget,DomainRules;var Sly,CookieManager,Request,jQuery;define("Widgets.ContactForm.BaseTheme",["Depd.ZBLib","Depd.LightBox","Core.Animation"],function(t,e,i){return Zotabox.Class.extend({data:{},elm:null,ZBLib:null,LightBox:null,isSubscribe:!1,isCheckTermOfServices:!1,isFirstRefresh:!1,customFieldListForm:[],__constructor:function(e,i,a){this.data=e,this.elm=i,this.ZBLib=new t,this.LightBox=a,1==parseInt(this.data.term_of_service.enable)&&(1==parseInt(this.data.term_of_service.euOnly)?this.isCheckTermOfServices=!1:this.isCheckTermOfServices=!0)},initFunction:function(){this.tooltipEvent(),this.validateForm(),this.checkEU()},checkEU:function(){var t=this;if(this.ZBLib._isMobileIos()&&Zotabox.Core.jQuery(this.elm.contentDocument).find(".privacy-checkbox").addClass("mobile-ios"),1==parseInt(this.data.term_of_service.enable)&&1==parseInt(this.data.term_of_service.euOnly)){var e=Zotabox.Cookies.Session.cookie("_ZB_STATIC_IS_EU");if(void 0===e||_.isEmpty(e))Zotabox.getDomainRules().isEU(function(e){e&&(t.isCheckTermOfServices=!0,Zotabox.Core.jQuery(t.elm.contentDocument).find(".privacy-checkbox").show(),document.cookie="_ZB_STATIC_IS_EU=1; path=/")});else t.isCheckTermOfServices=!0,Zotabox.Core.jQuery(t.elm.contentDocument).find(".privacy-checkbox").show()}return!1},tooltipEvent:function(){var t=Zotabox.Core.jQuery(this.elm.contentDocument).find(".ztb-field"),e=!0;t.on("keyup change focus",function(t){var i=Zotabox.Core.jQuery(this),a=Zotabox.Core.jQuery(this).siblings(".ztb-field-tooltip");if(_.isEmpty(i.val())||i.val()==i.find("option:hidden").val()?a.hide():(a.show(),a.outerHeight()>25&&a.css({top:-(a.outerHeight()-10)+"px"})),"radio"==i.attr("type")||"checkbox"==i.attr("type")){var o=void 0!==t.keyCode?t.keyCode:null;"keyup"==t.type&&32==o&&this.checked&&setTimeout(function(){i.prop("checked",!1)},0),"focus"==t.type?0==this.checked&&(e=!1):"change"==t.type&&(e=!1),32==o&&0==this.checked&&setTimeout(function(){i.prop("checked",!0)},0),setTimeout(function(){e=!0},500)}}),t.focusout(function(){Zotabox.Core.jQuery(this).siblings(".ztb-field-tooltip").hide()}),Zotabox.Core.jQuery(this.elm.contentDocument).find('input[type="radio"]','input[type="checkbox"]').click(function(){var t=this;setTimeout(function(){1==t.checked&&1==e&&(Zotabox.Core.jQuery(t).prop("checked",!1),e=!1)},0)})},validateForm:function(){var t=this,e=Sly("#ztb-submit-button").find(this.elm.contentDocument),i=this.elm.contentDocument.getElementsByClassName("ztb-item"),a=/^[0-9a-zA-Z]+([0-9a-zA-Z]*[-._+])*[0-9a-zA-Z_]+@[0-9a-zA-Z]+([-.][0-9a-zA-Z]+)*([0-9a-zA-Z]*[.])[a-zA-Z]{2,20}$/;e.onclick=function(){for(var o,n,s=!0,d=0;d<i.length;d++){var r,c=i[d].getAttribute("data-field"),l=i[d].getAttribute("name"),m=i[d].getAttribute("type"),h=i[d].value;if("radio"==m&&3==c)(r=jQuery(t.elm.contentDocument).find(i[d]).parent(".ztb-radio-field").siblings(".radio-label")).removeClass("radio-invalid"),0==jQuery(t.elm.contentDocument).find('[name="'+l+'"]').is(":checked")?(r.addClass("radio-invalid"),s=!1):r.removeClass("radio-invalid");if("checkbox"==m&&3==c)(r=jQuery(t.elm.contentDocument).find(i[d]).parent(".ztb-checkbox-field").siblings(".checkbox-label")).removeClass("radio-invalid"),0==jQuery(t.elm.contentDocument).find('[name="'+l+'"]').is(":checked")?(r.addClass("radio-invalid"),s=!1):r.removeClass("radio-invalid");if("dropdown"==m&&3==c)jQuery(t.elm.contentDocument).find('[name="'+l+'"] option:hidden').val()==h&&(s=!1,t.setColorErrorField(i[d]));if(""==h&&3==c&&"radio"!=m&&"dropdown"!=m)s=!1,t.setColorErrorField(i[d]);else if("radio"!=m&&"email"==l&&""!=h&&1!=t.data.enable_email_field){1==(o=i[d],void 0,(n=a.test(o.value))||o.focus(),n)?i[d].classList.remove("invalid"):(s=!1,t.setColorErrorField(i[d]))}else i[d].classList.remove("invalid")}var u=Sly('[name="department_email"]').find(t.elm.contentDocument),b=void 0!==u?u.value:"";void 0===u||!_.isEmpty(b)&&b!=t.data.department_label||(t.setColorErrorField(u),s=!1);var f=jQuery(t.elm.contentDocument).find(".privacy-checkbox label"),p=jQuery(t.elm.contentDocument).find("#pricacy-check");f.removeClass("radio-invalid"),0==p.prop("checked")&&1==t.isCheckTermOfServices?(1==s&&(f.addClass("zbx-shake"),f.addClass("zbx-shake-constant"),setTimeout(function(){f.removeClass("zbx-shake"),f.removeClass("zbx-shake-constant")},350)),s=!1):f.removeClass("radio-invalid");var g=jQuery(t.elm.contentDocument).find(".add-more-attachfile,.zb-all-icon-attach");g.removeClass("radio-invalid"),3==t.data.enable_attach_file_field&&_.isEmpty(jQuery(t.elm.contentDocument).find("#attach_file").val())?(g.addClass("radio-invalid"),setTimeout(function(){g.removeClass("radio-invalid")},1500)):g.removeClass("radio-invalid"),1==s&&(e.setAttribute("disabled","true"),e.className=e.className+" progress-bar-strip",t.sendMail())};for(var o=0;o<i.length;o++){i[o].onfocus=function(t){void 0!=t.currentTarget&&t.currentTarget.removeAttribute("style")}}var n=this.elm.contentDocument.querySelectorAll(".ztb-radio-button input");if(n)for(o=0;o<n.length;o++){n[o].onclick=function(t){t.currentTarget.parentElement.parentElement.querySelector(".radio-label").classList.remove("radio-invalid")}}var s=this.elm.contentDocument.querySelectorAll(".ztb-checkbox-button input");if(s)for(o=0;o<s.length;o++){s[o].onclick=function(t){t.currentTarget.parentElement.parentElement.querySelector(".checkbox-label").classList.remove("radio-invalid")}}},stripTags:function(t){return void 0!==t?t.replace(/\n/g," "):t},setFontSize:function(){var t=Sly(".ztb-cf-content").find(this.elm.contentDocument).clientWidth;if(window.innerWidth<=600){var e=(t=window.innerWidth)>400?(t-120)/10:t/10;e=e>parseInt(this.data.form_title_font_size)?parseInt(this.data.form_title_font_size):e,Sly("#ztb-head-title").find(this.elm.contentDocument).style.fontSize=e+"px"}},setColorErrorField:function(t){var e=this;t.className=t.className+" invalid";var a,o,n,s=e.hexToRgb("#d90000"),d=[248,199,199],r=[255,255,255],c=[219,60,60],l=[s.r,s.g,s.b];"dark"==e.data.field_style&&(r=[26,24,25]),a={delay:0,duration:2e3,delta:i.easing.sinusoidalEaseInOut,step:function(i){var a=e.data.opacity;t.style.backgroundColor="rgba("+Math.max(Math.min(parseInt(i*(r[0]-d[0])+d[0],10),255),0)+","+Math.max(Math.min(parseInt(i*(r[1]-d[1])+d[1],10),255),0)+","+Math.max(Math.min(parseInt(i*(r[2]-d[2])+d[2],10),255),0)+","+a+")",t.style.borderColor="rgb("+Math.max(Math.min(parseInt(i*(l[0]-c[0])+c[0],10),255),0)+","+Math.max(Math.min(parseInt(i*(l[1]-c[1])+c[1],10),255),0)+","+Math.max(Math.min(parseInt(i*(l[2]-c[2])+c[2],10),255),0)+")"},complete:function(){t.removeAttribute("style"),t.style.border="1px solid #d90000"}},o=new Date,n=setInterval(function(){var t=(new Date-o)/a.duration;t>1&&(t=1);var e=a.delta(t);a.step(e),1==t&&(clearInterval(n),_.isFunction(a.complete)&&a.complete())},a.delay||0)},hexToRgb:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,a){return e+e+i+i+a+a});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},sendMail:function(){for(var t=this,e=this.elm.contentDocument.getElementsByClassName("ztb-item"),i={},a="",o="Zotabox <mailer@zotabox.com>",n=null,s=(this.elm.contentDocument.getElementById("form-cf"),0);s<e.length;s++){var d=_.isEmpty(e[s].getAttribute("data-name"))?e[s].getAttribute("name"):e[s].getAttribute("data-name"),r=e[s].value;i[d]=r}if(void 0!==i.subject&&""!=i.subject)a=i.subject;else if(!_.isEmpty(i.message)){var c=!0;!_.isEmpty(t.data.subject_prefix)&&t.data.subject_prefix.search("#uid")>=0&&(c=!1),c&&(a=_.isEmpty(i.message)?"":i.message,i.message.length>88&&(a=t.substring(i.message,88)+".."))}var l=Sly('[name="department_email"]').find(t.elm.contentDocument),m=void 0!==l?l.value:"",h="object"==typeof t.data.department_email||_.isEmpty(t.data.department_email)?t.data.department_email:JSON.parse(t.data.department_email),u=_.isEmpty(m)||m==t.data.department_label?"recipient_email":m,b=null!=h?h.email_list:h,f="recipient_email"==u||_.isEmpty(m)?"":b[m].name,p=!1;if(_.isEmpty(t.data.subject_prefix)||void 0===a)_.isEmpty(f)||(a="["+f+"] "+a);else{if(t.data.subject_prefix.search("#subject")>=0&&(a=t.data.subject_prefix.replace("#subject",a),p=!0),void 0!==i.name){var g=i.name.indexOf(" ");null!=g&&g>0?(fname=i.name.substring(0,g),lname=i.name.substring(g)):fname=i.name,t.data.subject_prefix.search("#firstname")>=0&&!_.isEmpty(i.name)&&(a=t.data.subject_prefix.replace("#firstname",fname),p=!0),t.data.subject_prefix.search("#fullname")>=0&&!_.isEmpty(i.name)&&(a=t.data.subject_prefix.replace("#fullname",i.name),p=!0)}if(t.data.subject_prefix.search("#department")>=0&&!_.isEmpty(f)&&(a=p?a.replace("#department","["+f+"] "):t.data.subject_prefix.replace("#department","["+f+"] "),p=!0),0==p&&(a=(a=t.data.subject_prefix+" "+a).replace(/#subject|#department|#firstname|#fullname/g,"")),t.data.subject_prefix.search("#uid")>=0){var y="#"+parseInt(Date.now()/100%1e6);a=a.replace("#uid",y)}}void 0!==i.name&&""!=i.name&&(o=i.name+" <mailer@zotabox.com>"),void 0!==i.email&&""!=i.email&&(n=void 0!==i.name&&""!=i.name?i.name+" <"+i.email+">":i.email),i.url=window.location.href;var v=Sly("#ztb-submit-button").find(this.elm.contentDocument);v.classList.add("ztb-submit"),this.customFieldListForm={},void 0!==i.name&&(this.customFieldListForm.name=i.name),void 0!==i.email&&(this.customFieldListForm.email=i.email),void 0!==i.subject&&(this.customFieldListForm.subject=i.subject),void 0!==i.message&&(this.customFieldListForm.message=i.message);var w=jQuery(this.elm.contentDocument).find(".ztb-custom-field-input"),x=[];0!=w.length&&jQuery.each(w,function(e,i){var a=jQuery(i).attr("data-name"),o=jQuery(i).val().trim(),n=jQuery(i).attr("type"),s=jQuery(i).is(":checked"),d=jQuery(i).attr("data-label");if(("radio"!=n&&"checkbox"!=n&&!_.isEmpty(o)||1==s&&"checkbox"!=n)&&("dropdown"==n?o!=d&&x.push({name:a,value:o}):x.push({name:a,value:o})),"dropdown"==n)o!=d&&(t.customFieldListForm[a]=o);else if("radio"==n)1==s?t.customFieldListForm[a]=o:_.isEmpty(t.customFieldListForm[a])&&(t.customFieldListForm[a]="");else if("checkbox"==n){var r=[];jQuery.each(jQuery(t.elm.contentDocument).find('[data-name="'+a+'"]:checked'),function(t,e){r.push(jQuery(e).val().trim())}),0!=r.length&&void 0==t.customFieldListForm[a]&&(r=r.join(", "),t.customFieldListForm[a]=r,x.push({name:a,value:r}))}else t.customFieldListForm[a]=o});var S={code:"contact_form_email"};S.to=u,S.widget_id=t.data.widget_id,S.customer_id=Zotabox.getData().customer.id,S.domain_id=DOMAIN.id,S.sender=o,S.reply_to=n,S.subject=t.stripTags(a),S.new_form=!0,i.custom_field=x,i.attach_file_label=t.data.attach_file_field_text;var C=function(){if(1==Zotabox.getData().customer.isAnonymous)return t.showThankMessage(),v.removeAttribute("disabled"),!1;S.data=JSON.stringify(i),jQuery.ajax({url:ZOTABOX.actions+"/contact/send",data:S,type:"post",success:function(e){Zotabox[t.data.id+"uniquePath"]=t.ZBLib.createUniquePath(5),t.showThankMessage(),t.isSubscribe=!0,v.removeAttribute("disabled"),Stats.sendEvents2("SMS",t.data.monitor_id,t.data.widget_id),1!=t.data.redirect_thank_you||_.isEmpty(t.data.thank_you_page)||(window.location.href=t.ZBLib.convertUrl(t.data.thank_you_page))},error:function(e){v.classList.remove("progress-bar-strip"),v.removeAttribute("disabled"),t.errorSendMail(v)}}),t.sendSubscribe()};if(1!=t.data.enable_attach_file_field)var k=setInterval(function(){0==t.elm.contentWindow.UPLOADING&&(clearInterval(k),void 0!==t.elm.contentWindow.FILE_LIST&&0!=t.elm.contentWindow.FILE_LIST.length&&(i.attachment=t.elm.contentWindow.FILE_LIST),C())},500);else C();return!0},checkFileValid:function(t){for(var e={error:!1,message:"Invalid file type"},i=[".ade",".adp",".app",".asp",".bas",".bat",".cer",".chm",".cmd",".com",".cpl",".crt",".csh",".der",".exe",".fxp",".gadget",".hlp",".hta",".inf",".ins",".isp",".its",".js",".jse",".ksh",".lib",".lnk",".mad",".maf",".mag",".mam",".maq",".mar",".mas",".mat",".mau",".mav",".maw",".mda",".mdb",".mde",".mdt",".mdw",".mdz",".msc",".msh",".msh1",".msh2",".mshxml",".msh1xml",".msh2xml",".msi",".msp",".pif",".plg",".prf",".prg",".reg",".scf",".scr",".sct",".shb",".shs",".sys",".ps1",".ps1xml",".ps2",".ps2xml",".url",".vb",".vbe",".vbs",".vps",".vsmacros",".vss",".psc1",".psc2",".tmp",".vst",".vsw",".vxd",".ws",".wsc",".wsf",".wsh",".xnk",".mst",".ops",".pcd"],a=0;a<i.length;a++){var o=i[a];if(sFileName=t.name,sFileName.substr(sFileName.length-o.length,o.length).toLowerCase()==o.toLowerCase()){e.error=!0,e.message="Invalid file type";break}t.size>5e6&&(e.error=!0,e.message="File is too big (max is 5Mb)")}return e},sendSubscribe:function(){if(1==Zotabox.getData().customer.isAnonymous)return!1;var t=this,e="",i={},a=jQuery(t.elm.contentDocument).find("#pricacy-check");null!=this.customFieldListForm&&(i=this.customFieldListForm),void 0!==Sly("#name").find(this.elm.contentDocument)&&(e=Sly("#name").find(this.elm.contentDocument).value);var o=1==a.prop("checked")&&1==t.isCheckTermOfServices?1:0,n=_.isEmpty(this.data.custom_widget_title)?this.data.display_name:this.data.custom_widget_title,s={type:"mailing",domain_subscriber:window.location.href,domain_id:DOMAIN.id,widget_id:this.data.widget_id,customer_id:Zotabox.getData().customer.id,data:i,widget_name:n,is_subscribe:1==t.data.add_contact_to_mailist?1:0,file_label:t.data.attach_file_field_text,is_term_of_service:o,is_save_form_data:this.data.is_save_form_data};void 0!==t.elm.contentWindow.FILE_LIST&&0!=t.elm.contentWindow.FILE_LIST.length&&(s.files=this.elm.contentWindow.FILE_LIST);var d={tool_id:this.data.widget_id,tool_name:n,url:window.location.href,name:e,email:void 0!=i.email?i.email:""};return _.each(i,function(t,e){d[e]=t}),"function"==typeof window.ZotaboxBeforeSubmit&&window.ZotaboxBeforeSubmit(s),new Request({url:ZOTABOX.actions+"/form",headers:{"Content-type":"application/x-www-form-urlencoded"},data:s,onSuccess:function(e){1!=(e=JSON.parse(e)).isNew&&void 0==e.MessageId||Stats.sendEvents2("ES",t.data.monitor_id,t.data.widget_id),t.ZBLib.emailSubcribeCallback(d)}}).send()},errorSendMail:function(t){var e,a,o,n=this,s=n.hexToRgb(n.data.form_color_adjusted),d=[255,0,0],r=[s.r,s.g,s.b];e={delay:0,duration:2e3,delta:i.easing.sinusoidalEaseInOut,step:function(e){var i=n.data.opacity;t.style.backgroundColor="rgba("+Math.max(Math.min(parseInt(e*(r[0]-d[0])+d[0],10),255),0)+","+Math.max(Math.min(parseInt(e*(r[1]-d[1])+d[1],10),255),0)+","+Math.max(Math.min(parseInt(e*(r[2]-d[2])+d[2],10),255),0)+","+i+")"},complete:function(){t.removeAttribute("style")}},a=new Date,o=setInterval(function(){var t=(new Date-a)/e.duration;t>1&&(t=1);var i=e.delta(t);e.step(i),1==t&&(clearInterval(o),_.isFunction(e.complete)&&e.complete())},e.delay||0)},substring:function(t,e){var i=t.substr(0,e);return i=i.substr(0,Math.min(i.length,i.lastIndexOf(" ")))},showThankMessage:function(){Sly("#ztb-tks-msg").find(this.elm.contentDocument);var t=Sly("#ztb-form-wrapper").find(this.elm.contentDocument);t.className=t.className+" success-form",Sly("#ztb-submit-button").find(this.elm.contentDocument).classList.remove("progress-bar-strip"),this.resetForm()},hoverAndClickButton:function(){var t=this,e=Sly("#ztb-submit-button").find(this.elm.contentDocument);e.onmouseover=function(i){e.style.backgroundColor=t.ZBLib.getHoverColor(t.data.main_button_color_adjusted)},e.onmouseout=function(i){e.style.backgroundColor=t.data.main_button_color_adjusted}},updateLayout:function(t,e,i){var a=Sly(".ztb-content").find(this.elm.contentDocument),o=(e-a.clientHeight-85)/2;a.style.marginTop=o+"px"},checkThankYouMessage:function(t){var e=Sly("#popup-content").find(this.elm.contentDocument),i=Sly("#zb-popup-text").find(this.elm.contentDocument),a=Sly("#zb-email-form").find(this.elm.contentDocument),o=Sly("#ztb-name-input").find(this.elm.contentDocument);if(this.isSubscribe)this.showThankMessage();else if(t>400)switch(this.data.theme_package){case"default/default":o&&(o.className=""),Sly("#ztb-email-input").find(this.elm.contentDocument).className="",a.className="email-capture-form",t<500&&(a.className="email-capture-form-medium");break;case"temp3/default":e.insertBefore(a,i);default:i.className="popup-text",a.className="email-capture-form"}else switch(this.data.theme_package){case"default/default":o&&(o.className="name-input-small"),Sly("#ztb-email-input").find(this.elm.contentDocument).className="email-input-small",a.className="email-capture-form-small";break;case"temp3/default":e.insertBefore(i,a);default:i.className="popup-text-small",a.className="email-capture-form-small"}},updateSizePopup:function(t){var e=this,i=Sly(".ztb-cf-content").find(this.elm.contentDocument),a=(Sly(".ztb-background").find(this.elm.contentDocument),document.querySelector('[data-zbwid="'+e.data.client_hash_id+'"] #ztb-cf-widget'));Sly("body").find(this.elm.contentDocument).clientWidth;i.removeAttribute("style"),document.querySelector(".zb-content-body")&&document.querySelector(".zb-content-body").removeAttribute("style"),Sly(".ztb-content").find(this.elm.contentDocument).style.marginTop=0,"rtl"==getComputedStyle(i).direction&&Zotabox.addClass(i,"rtl-dir"),contentWidth=this.data.width?this.data.width:600,800==this.data.width&&(window.innerWidth<=1024||window.innerHeight<=700?(contentWidth>600&&(contentWidth=600),s>400&&(s=400),window.innerWidth<600&&(s=450)):(contentWidth=e.data.width,s=e.data.height));var o=Zotabox.Core.jQuery(window).width();if(contentWidth>o&&(contentWidth=o),t)o<=600&&(contentWidth=o);else{var n=Zotabox.Core.jQuery("#zbwid-"+e.data.client_hash_id);contentWidth=n.width()}t?(document.getElementById(t+"-content-body").style.width=contentWidth+"px",document.getElementById(t+"-holder").style.width=contentWidth+"px",a.style.setProperty("width",contentWidth+"px","important"),a.style.setProperty("max-width",contentWidth+"px","important")):void 0!==document.querySelector("#zbwid-"+e.data.client_hash_id)&&(document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget").style.width=contentWidth+"px"),i.style.width=contentWidth>0?contentWidth+"px":"100%",i.style.maxWidth=contentWidth>0?contentWidth+"px":"100%",i.style.minWidth=contentWidth>0?contentWidth+"px":"100%",i.style.height="auto",i.style.width=contentWidth>0?contentWidth+"px":"100%";var s=i.offsetHeight;if(s<this.data.height&&null!=t&&800!=this.data.width&&(s=this.data.height),i.style.height=s>0?s+"px":"auto",t)document.getElementById(t+"-content-body").style.height=s+"px",document.getElementById(t+"-holder").style.height=s+"px",this.LightBox.options.height=s;else if(void 0!==document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget")&&null!=document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget")&&s>0){var d=Math.min(parseInt(document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget").style.height),s);document.querySelector("#zbwid-"+e.data.client_hash_id).clientWidth<600&&(d=s),null==e.ZBLib._isMobileIos()&&1!=e.isFirstRefresh||(d=Math.max(parseInt(document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget").style.height),s)),document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget").style.height=d+"px",!1===e.isFirstRefresh&&(e.isFirstRefresh=!0)}else void 0!==document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget")&&s<=0&&setTimeout(function(){document.querySelector("#zbwid-"+e.data.client_hash_id+" #ztb-cf-widget").style.setProperty("height",e.getHiddenElmSize(i).height+"px","important")},0);var r=Sly("#background-image").find(this.elm.contentDocument);this.ZBLib.fitBackground(r),this.updateLayout(contentWidth,s,t),t&&this.LightBox.centerize()},resetForm:function(){this.elm.contentWindow.FILE_LIST=[],jQuery(this.elm.contentDocument).find(".input-attach-file:not(.hidden-attach-file)").remove();var t=jQuery(this.elm.contentDocument).find("#form-cf *:not(#name,#email,select)");jQuery.each(t,function(t,e){"OPTION"!=jQuery(e).prop("tagName")&&"radio"!=jQuery(e).attr("type")&&"checkbox"!=jQuery(e).attr("type")?jQuery(e).val(null):this.defaultSelected&&(this.selected=!0),jQuery(e).get(0).selectedIndex=0,jQuery(e).removeAttr("checked")})},getHiddenElmSize:function(t){var e=t.cloneNode(!0),i=Sly("head").find(this.elm.contentDocument).cloneNode(!0);i.setAttribute("id","ztb-clone-head"),e.setAttribute("id","ztb-clone-widget"),parent.document.body.appendChild(i),parent.document.body.appendChild(e);var a=e.clientHeight,o=e.clientWidth;return i.outerHTML="",e.outerHTML="",{height:a,width:o}}})}),define("Widgets.ContactForm.BaseWidgetFunction",["Core.Animation","Core.Request","Depd.LightBox","Depd.CanvasLoader","Depd.ZBLib","Widgets.ContactForm.BaseTheme"],function(t,e,i,a,o,n){var s=!1;return isClickTab=!1,{iframe:null,button:null,lightbox:null,ZBLib:null,cookieManager:null,options:{effect:"slideInDown",prefix:"zb-",width:600,padding:0,logoLink:"http://info.zotabox.com/?utm_source="+window.location.host.replace("www.","")+"&utm_medium=Contact%20Form&utm_campaign=widget%20referral",text:{closeButton:'<span class="zb-all-icon-close"></span>',logoButton:'<div class="ztb-logo-popup">Powered by</div>'}},onIframeReady:function(){},render:function(){var t=this;this.data=_.extend({},this.data,{domain:DOMAIN});if(null==this.data.term_of_service&&(this.data.term_of_service={enable:0,message:"<p>I agree to the <u>Terms of Service</u></p>",euOnly:0}),this.data.ZOTABOX_DOMAIN_ACTIONS=ZOTABOX.actions,this.ZBLib=new o,Zotabox[t.data.id+"uniquePath"]=this.ZBLib.createUniquePath(5),_.isEqual(this.container,"default"))this.createButton(),this.lightbox=new i(this.el,_.extend(this.options,{content:"",text:{closeButton:'<span class="zb-all-icon-close"></span>',logoButton:'<div class="ztb-logo-popup">Powered by</div>'},afterContent:function(){var e=this.getContext();e.iframe=e._loadIframe(this.ContentBodyElement),_.isEqual(window.location.hash,"#zbwid-"+t._hashId)&&t.showPopup(!0)},onhide:function(){isClickTab||(s=!1)},onshow:function(){s=!0}}),t),Zotabox.addEvent("click",this.lightbox.CloseButtonElement,function(e){document.cookie="_ZB_STATIC_CF_STATUS_"+t.data.domain_id+"=1; path=/"}),Zotabox.addEvent("click",this.lightbox.LogoElement,function(e){Stats.sendEvents("RC",t.data.monitor_id)}),Zotabox.addEvent("hashchange",window,function(e){new RegExp(".*#zbwid-"+t._hashId,"g").exec(String(window.location.hash))&&(t.showPopup(!0),window.location.hash="#ok")}),Zotabox.addEvent("click",document,function(e){var i=0,a=function t(e){if(!(i>=5)&&e)return _.isEqual(e.nodeName,"A")?e:(i++,t(e.parentNode))}(e.target);if(a&&!(a.href.length>2e3))return new RegExp(".*#zbwid-"+t._hashId,"g").exec(String(a.href))?(t.showPopup(!0),e.preventDefault()):void 0});else{if(this.iframe=t._loadIframe(this.el),!this.options.hasLogo)return this;var e=document.createElement("a");e.setAttribute("target","zotabox"),e.setAttribute("href",this.options.logoLink),e.setAttribute("title","Zotabox"),e.setAttribute("class","ztb-embed-logo"),e.innerHTML='<span class="logo-ztb icon-zotabox-logo"></span>',Zotabox.addClass(e,this.options.prefix+"logo"),this.el.appendChild(e),Zotabox.addEvent("click",e,function(t){Stats.sendEvents("RC",this.data.monitor_id)})}return this},doShow:function(){if(3!==parseInt(this.data.tab_type)){var t=this.data.placement;(_.isEqual(this.data.placement,"bottom/left")||_.isEqual(this.data.placement,"bottom/right"))&&(t=this.data.offsetRight>this.data.offsetLeft?"left":"right"),Zotabox.getMobileButton().addButton({name:"contact_form_"+this.data.widget_id,monitor_id:this.data.monitor_id,widget_id:this.data.widget_id,label:"Contact Form",icon:"zb2-icon "+(_.isEqual(this.data.tab_icon,"icon-tab-icon-none")||_.isEmpty(this.data.tab_icon)?"icon-ztb-icon-email2":this.data.tab_icon),color:this.data.tab_color,target:"_parent",deeplink:"javascript:Zotabox.getWidgetById("+this.data.widget_id+").showPopup(true);",on:!!Zotabox.getDomainRules().isEnable(this.data.widget_id),position:0,iconColor:this.data.tab_text_color,align:t}),Zotabox.getMobileButton().setOptions({align:t})}},showPopup:function(t){if(t=t||!1,_.isEqual(t,!0))return this.doShowPopup();var e=Zotabox.Cookies.Session.cookie("_ZB_STATIC_"+this.data.widget_id+"_STATUS");_.isEmpty(e)&&!s&&(this.doShowPopup(),Zotabox.Cookies.Session.cookie("_ZB_STATIC_"+this.data.widget_id+"_STATUS","opened"))},doShowPopup:function(){var t=this;if(this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.ContactFormBox)window.document.getElementById(this.lightbox.UUID+"-holder").style.display="block",window.document.getElementById(this.lightbox.UUID+"-holder").style.width="auto",this.iframe.contentWindow.ContactFormBox.refreshUI(),this.lightbox.show();else var e=setTimeout(function(){return t.doShowPopup(),clearTimeout(e)}.bind(this),50)},getMeta:function(t,e){var i=new Image;i.src=t,i.onload=function(){e(this.naturalWidth,this.naturalHeight)}},createButton:function(){var t=this,e=Zotabox.Cookies.Session.cookie("_ZB_STATIC_CLOSE_CF_TAB_"+this.data.domain_id);Zotabox.Cookies.Session.cookie("_ZB_STATIC_CF_STATUS_"+this.data.domain_id);switch(this.data.placement){case"left":90;break;case"bottom/left":case"bottom/right":0;break;case"right":-90}var i=this.button=document.createElement("div");Zotabox.addClass(i,"ztb-cf-trigger");var a="ztb-"+this.data.placement;if("bottom/left"!=this.data.placement&&"bottom/right"!=this.data.placement||(a=this.data.offsetRight>this.data.offsetLeft?"ztb-left":"ztb-right"),Zotabox.addClass(i,a),i.setAttribute("id","ztb-widget-tab"),i.innerHTML=this.templates.trigger(_.extend(this.data,{})),this.el.appendChild(i),Zotabox.addEvent("click",Sly("#ztb-cf-show-widget").find(t.el),function(){isClickTab=!1,t.doShowPopup(),Stats.sendEvents2("TC",t.data.monitor_id,t.data.widget_id),isClickTab=!0}),0!=t.data.offsetRight&&"right"!=t.data.placement||(i.className+=" ztb-left-button"),2==this.data.tab_type){document.getElementById("ztb-cf-tabimage").onload=function(){t.showTab(i,t.data.placement),Zotabox.addEvent("resize",window,function(e){var i=window.innerWidth,a=parseInt(t.data.tab_size),o=parseInt(i/100)*parseInt(a),n=1.5*parseInt(t.data.tab_image_default_size);o<40&&(o=40),o>n&&(o=n),Sly("#ztb-cf-tabimage").find(t.el).style.width=o+"px"})},1==e&&(Sly(".ztb-cf-trigger").find(t.el).style.display="none");var o=Sly(".tg.btn-x").find(i);Zotabox.addEvent("click",o,function(){switch(Zotabox.Cookies.Aruhi.cookie("_ZB_STATIC_CLOSE_CF_TAB_"+t.data.domain_id,1),_triggerWidth=Math.abs(parseInt(window.getComputedStyle(i,null).getPropertyValue("width"))),_triggerHeight=Math.abs(parseInt(window.getComputedStyle(i,null).getPropertyValue("height"))),t.data.placement){case"left":Zotabox.Depd.TweenMax.to(i,.5,{left:-_triggerWidth+"px"});break;case"bottom/left":case"bottom/right":Zotabox.Depd.TweenMax.to(i,.5,{bottom:-_triggerHeight+"px"});break;case"right":Zotabox.Depd.TweenMax.to(i,.5,{right:-_triggerWidth+"px"})}})}else{var n=10+parseInt(t.data.tab_text_font_size/10);switch(t.data.placement){case"left":Zotabox.Depd.TweenMax.to(i,.5,{left:parseInt(t.data.tab_text_font_size+2*n)});break;case"bottom/left":case"bottom/right":t.showTab(i,t.data.placement);break;case"right":Zotabox.Depd.TweenMax.to(i,.5,{right:parseInt(t.data.tab_text_font_size+2*n)})}}},showTab:function(t,e){switch(e){case"left":Zotabox.Depd.TweenMax.to(t,.5,{left:0});break;case"bottom/left":case"bottom/right":Zotabox.Depd.TweenMax.to(t,.5,{bottom:0});break;case"right":Zotabox.Depd.TweenMax.to(t,.5,{right:0})}},_loadIframe:function(i){var o=this,s=document.createElement("iframe");s.setAttribute("frameborder","0"),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("seamless",!0),s.setAttribute("id","ztb-cf-widget-"+this._hashId);var d=_.once(function(i){var d;s.contentDocument?d=s.contentDocument:s.contentWindow&&(d=s.contentWindow.document),d.open(),s.contentWindow._=_,s.contentWindow.Sly=Sly,s.contentWindow.CookieManager=CookieManager,s.contentWindow.Animation=t,s.contentWindow.Request=e,s.contentWindow.ZLightBox=o.lightbox,s.contentWindow.CanvasLoader=a,s.contentWindow.Stats=Stats,s.contentWindow.ZOTABOX=ZOTABOX,s.contentWindow.Zotabox=Zotabox,s.contentWindow.DOMAIN=DOMAIN,s.contentWindow.ZBLib=o.ZBLib,s.contentWindow.BaseTheme=new n(o.data,this,o.lightbox),d.write(o.templates.iframe(_.extend({},o.data,{})));var r=document.createElement("style");r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=o.styles.iframe:r.textContent=o.styles.iframe,d.getElementsByTagName("head")[0].appendChild(r);var c=document.createElement("style");function l(){s.contentWindow.ContactFormBox=new s.contentWindow.ContactForm;var t=Math.min(parseInt(window.getComputedStyle(o.el,null).width),o.data.width?o.data.width:600);s.style.width=t+"px",s.contentWindow.ContactFormBox.refreshUI();var e=s.contentWindow.getComputedStyle(d.body,null);if(e){var i=parseInt(e.height);s.setAttribute("height",i),s.style.height=i+"px",s.setAttribute("style","width: "+t+"px !important;height: "+i+"px !important; min-width: "+t+"px !important;max-width: "+t+"px !important;")}}if(c.setAttribute("type","text/css"),c.styleSheet?c.styleSheet.cssText=Zotabox.getTemplates("fonts")({STATIC_DOMAIN_URI:[Zotabox.getDomainURIs("static"),"__"+Zotabox.getConfig().version].join("/")}):c.textContent=Zotabox.getTemplates("fonts")({STATIC_DOMAIN_URI:[Zotabox.getDomainURIs("static"),"__"+Zotabox.getConfig().version].join("/")}),d.getElementsByTagName("head")[0].appendChild(c),s.setAttribute("id","ztb-cf-widget"),s.setAttribute("scrolling","no"),o.lightbox||(d.getElementsByTagName("html")[0].style.width=parseInt(window.getComputedStyle(o.el,null).width)+"px"),d.close(),s.contentWindow.onrender&&s.contentWindow.onrender(),Zotabox.addEvent("resize",window,function(t){o.iframe.contentWindow.ContactFormBox&&l()}),s.contentWindow.ContactFormBox)l();else var m=0,h=setInterval(function(){m++,_.isFunction(s.contentWindow.ContactForm)?(clearInterval(h),l()):s.contentWindow.onrenderZTB=function(){l()},m>=100&&clearInterval(h)},100)});return Zotabox.addEvent("load",s,d),i.appendChild(s)}}});define("Widgets.ContactForm.Default",["Widgets.ContactForm.BaseWidgetFunction"],function(t){var o=_.extend(t,{options:{effect:"slideInDown",prefix:"zb-",padding:0,logoLink:"http://info.zotabox.com/?utm_source="+window.location.host.replace("www.","")+"&utm_medium=Contact%20Form&utm_campaign=widget%20referral",text:{logoButton:'<div class="ztb-logo-popup">Powered by</div>',closeButton:'<span class="icon-close "></span>'}},initialize:function(){}});return Zotabox.Widget.extend(o)});define("Widgets.ContactForm.Default.Template",[],{iframe:function(obj){obj||(obj={});var __t,__p="",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){__p+='<!DOCTYPE html>\n<html dir="auto">\n<head>\n    <title></title>\n    ';var assetUri=[Zotabox.getDomainURIs().static,"__"+Zotabox.getConfig().version].join("/");function getCountObj(e){var t=0;return _.isEmpty(e)||void 0===e||jQuery.each(e,function(e,n){e>t&&(t=e),t++}),t}__p+='\n    <script type="text/javascript" src="'+(null==(__t=assetUri)?"":__t)+'/asset/script/jquery.js"><\/script>\n    <script type="text/javascript" src="'+(null==(__t=assetUri)?"":__t)+'/asset/script/jquery.datetimepicker.full.js"><\/script>\n    <link href="'+(null==(__t=assetUri)?"":__t)+"/asset/style/datetimepicker.css\" rel=\"stylesheet\" type=\"text/css\" media=\"all\">\n    <meta http-equiv=\"Content-Security-Policy\" content=\"default-src data: 'self' *; media-src data: 'self' *; img-src * 'self' data: blob:; script-src * 'self' 'unsafe-inline' 'unsafe-eval'; style-src * 'self' 'unsafe-inline'; font-src * data: ;\">\n    <base target=\"_parent\">\n    ","undefined"!=typeof ZLightBox&&(__p+='\n    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, shrink-to-fit=no">\n    '),__p+='\n</head>\n<body>\n    <div class="ztb-cf-content ztb-container" id="ztb-cf-container">\n        <div class="ztb-background">\n            ',_.isEmpty(background_image.path)||(__p+=' \n            <img class="js-fade fade-in" id="background-image" src="'+(null==(__t=background_image.cache_path)?"":__t)+'">\n            '),__p+="\n        </div>\n        ",_.isEmpty(background_image.path)||(__p+='\n        <div class="popup-layer"></div>\n        '),__p+='\n        <div class="ztb-content">\n            \n            <div id="ztb-head-title" class="ztb-head-title">'+(null==(__t=form_title)?"":__t)+"</div>\n            ",_.isEmpty(form_description)||(__p+='\n                <div class="ztb-form-description">\n                    '+(null==(__t=formatUrlInStr(form_description))?"":__t)+"\n                </div>\n            "),__p+='\n            <div id="ztb-form-wrapper" class="ztb-form-wrapper">\n                <form id="form-cf" method="post" action="javascript:void(0);" enctype="multipart/form-data">\n                    <div class="ztb-form-item">\n                        ',__p+="\n                        ";var fieldPosition="right",isDisable=1;function htmlEntities(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}if(enable_name_field!=isDisable&&(fieldPosition="left"==fieldPosition?"right":"left",__p+='\n                        <div id="name-wrapper" class="ztb-field-wrapper name-wrapper">\n                            <div for="name" class="bcf-tooltip">\n                                <span>Please enter your name</span>\n                            </div>\n                            <input id="name" type="text" name="name" placeholder="'+(null==(__t=name_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_name_field)?"":__t)+'"  class="ztb-item ztb-field " tabindex="1">\n                            <span data-field="'+(null==(__t=enable_name_field)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=name_field_text)?"":__t)+"</div>\n                        </div>\n                        "),__p+="\n                        ",enable_email_field!=isDisable&&(fieldPosition="left"==fieldPosition?"right":"left",__p+='\n                        <div id="email-wrapper" class="ztb-field-wrapper email-wrapper">\n                            <div for="email" class="bcf-tooltip">\n                                <span>Please enter a valid email address</span>\n                            </div>\n                            <input id="email" type="text" name="email" placeholder="'+(null==(__t=email_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_email_field)?"":__t)+'"  class="ztb-item ztb-field" tabindex="2">\n                            <span data-field="'+(null==(__t=enable_email_field)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=email_field_text)?"":__t)+"</div>\n                        </div>\n                        "),"undefined"==typeof department_email||_.isEmpty(department_email))var departmentEmail={email_list:{},department_default:"",cc_email_list:{}};else{if("object"==typeof department_email||_.isEmpty(department_email))var departmentEmail=department_email;else var departmentEmail=JSON.parse(department_email);void 0===departmentEmail.email_list&&(departmentEmail.email_list={})}if(getCountObj(departmentEmail.email_list)>0&&(fieldPosition="left"==fieldPosition?"right":"left",__p+='\n                        <div id="department_email-wrapper" class="ztb-field-wrapper department_email-wrapper"  data-field="3">\n                            <div for="company" class="bcf-tooltip">\n                                <span>Please enter your website</span>\n                            </div>\n                            <span data-field="3" class="require-filed">*</span>\n                            <select id="department_email" class="ztb-item ztb-field" data-field="department_email" name="department_email" tabindex="3">\n                                <option selected hidden>'+(null==(__t=department_label)?"":__t)+"</option>\n                                ",_.each(departmentEmail.email_list,function(e,t){var n=e.name;__p+='\n                                    <option value="'+(null==(__t=t)?"":__t)+'" '+(null==(__t=e.email==departmentEmail.department_default?"selected":"")?"":__t)+">"+(null==(__t=htmlEntities(n))?"":__t)+"</option>\n                                    "}),__p+="\n                            </select>\n                        </div>\n                        "),__p+="\n\n                        ",enable_phone_field!=isDisable&&_.isEmpty(custom_field)&&_.isEmpty(department_email)&&(fieldPosition="left"==fieldPosition?"right":"left",__p+='\n                        <div id="phone-wrapper" class="ztb-field-wrapper phone-wrapper">\n                            <div for="phone" class="bcf-tooltip">\n                                <span>Please enter your phone</span>\n                            </div>\n                            <input id="phone" type="text" name="phone" placeholder="'+(null==(__t=phone_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_phone_field)?"":__t)+'"  class="ztb-item ztb-field " tabindex="4">\n                            \x3c!-- <span class="ztb-field-icon ztb-field-phone"></span> --\x3e\n                            <span data-field="'+(null==(__t=enable_phone_field)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=phone_field_text)?"":__t)+"</div>\n                        </div>\n                        "),__p+="\n                        \n                        ",enable_company_field!=isDisable&&_.isEmpty(custom_field)&&_.isEmpty(department_email)&&(fieldPosition="left"==fieldPosition?"right":"left",__p+='\n                        <div id="company-wrapper" class="ztb-field-wrapper company-wrapper">\n                            <div for="company" class="bcf-tooltip">\n                                <span>Please enter your company</span>\n                            </div>\n                            <input id="company" type="text" name="company" placeholder="'+(null==(__t=company_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_company_field)?"":__t)+'"  class="ztb-item ztb-field " tabindex="5">\n                            \x3c!-- <span class="ztb-field-icon ztb-field-company"></span> --\x3e\n                            <span data-field="'+(null==(__t=enable_company_field)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=company_field_text)?"":__t)+"</div>\n                        </div>\n                        "),__p+="\n                        \n                        ",enable_website_field!=isDisable&&_.isEmpty(custom_field)&&_.isEmpty(department_email)&&(fieldPosition="left"==fieldPosition?"right":"left",__p+='\n                        <div id="website-wrapper" class="ztb-field-wrapper website-wrapper">\n                            <div for="website" class="bcf-tooltip">\n                                <span>Please enter your website</span>\n                            </div>\n                            <input id="website" type="text" name="website" placeholder="'+(null==(__t=website_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_website_field)?"":__t)+'"  class="ztb-item ztb-field " tabindex="6">\n                            \x3c!-- <span class="ztb-field-icon ztb-field-website"></span> --\x3e\n                            <span data-field="'+(null==(__t=enable_website_field)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=website_field_text)?"":__t)+"</div>\n                        </div>\n                        "),__p+="\n\n                        \x3c!-- custom field --\x3e\n                        ","undefined"!=typeof custom_field)if("object"==typeof custom_field||_.isEmpty(custom_field))var customField=custom_field;else var customField=JSON.parse(custom_field);else var customField={};_.each(customField,function(e,t){customField[t].position=t+1}),customField=_.sortBy(customField,function(e){return parseInt(e.position)}),_.each(customField,function(e,t){var n=7+t+1,i=e.field_name.replace(new RegExp(" ","g"),"-").replace(/[|&;$%@"<>()+,]/g,"").toLowerCase();if(1!=e.status)switch(e.field_type){case"radio_button":if(fieldPosition="right",void 0!==e.field_value){__p+='\n                                        <div id="'+(null==(__t=i)?"":__t)+'-wrapper" class="ztb-radio-button">\n                                            <label class="radio-label" data-field="'+(null==(__t=e.status)?"":__t)+'" >'+(null==(__t=e.field_label)?"":__t)+"</label>\n                                        ";var l=e.field_value.split("\n");_.each(l,function(i,l){__p+='\n                                            <div class="ztb-radio-field">\n                                                <input data-name="'+(null==(__t=e.field_name)?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'" type="radio" id="radio_'+(null==(__t=t)?"":__t)+"_"+(null==(__t=l)?"":__t)+'" name="radio_'+(null==(__t=t)?"":__t)+'" value="'+(null==(__t=i)?"":__t)+'" class="ztb-item ztb-field ztb-custom-field-input" tabindex='+(null==(__t=n)?"":__t)+'>\n                                                <label for="radio_'+(null==(__t=t)?"":__t)+"_"+(null==(__t=l)?"":__t)+'">'+(null==(__t=i)?"":__t)+'</label>\n                                                <div class="check"></div>\n                                            </div>\n                                            '}),__p+="\n                                        </div>\n                                        "}break;case"multiple_choice":if(fieldPosition="right",void 0!==e.field_value){__p+='\n                                    <div id="'+(null==(__t=i)?"":__t)+'-wrapper" class="ztb-checkbox-button">\n                                        <label class="checkbox-label" data-field="'+(null==(__t=e.status)?"":__t)+'" >'+(null==(__t=e.field_label)?"":__t)+"</label>\n                                    ";l=e.field_value.split("\n");_.each(l,function(i,l){__p+='\n                                        <div class="ztb-checkbox-field">\n                                            <input data-name="'+(null==(__t=e.field_name)?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'" type="checkbox" id="checkbox_'+(null==(__t=t)?"":__t)+"_"+(null==(__t=l)?"":__t)+'" name="checkbox_'+(null==(__t=t)?"":__t)+'" value="'+(null==(__t=i)?"":__t)+'" class="ztb-item ztb-field ztb-custom-field-input filled-in" tabindex='+(null==(__t=n)?"":__t)+'>\n                                            <label for="checkbox_'+(null==(__t=t)?"":__t)+"_"+(null==(__t=l)?"":__t)+'">'+(null==(__t=i)?"":__t)+'</label>\n                                            \x3c!-- <div class="check"></div> --\x3e\n                                        </div>\n                                        '}),__p+="\n                                    </div>\n                                    "}break;case"date_time":__p+='\n                                    <div id="'+(null==(__t=i)?"":__t)+'-wrapper" class="ztb-field-wrapper '+(null==(__t="left"==fieldPosition?"ztb-field-right":"ztb-field-left")?"":__t)+'" field-type="'+(null==(__t=e.field_type)?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'">\n                                        <span class="icon-calendar zb-all-icon-calender"></span>\n                                        <input id="'+(null==(__t=i)?"":__t)+'" data-name="'+(null==(__t=e.field_name)?"":__t)+'" type="text" allow-time="',void 0!==e.allow_time?__p+=null==(__t=e.allow_time)?"":__t:__p+="2",__p+='" name="'+(null==(__t=e.field_type)?"":__t)+"_"+(null==(__t=t)?"":__t)+'" size="50" placeholder="'+(null==(__t=e.field_label)?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'"  class="ztb-item ztb-field ztb-date-time ztb-custom-field-input" value="" tabindex='+(null==(__t=n)?"":__t)+'>\n                                        \x3c!-- <span class="ztb-field-icon '+(null==(__t=e.icon)?"":__t)+'"></span> --\x3e\n                                        <span data-field="'+(null==(__t=e.status)?"":__t)+'" class="require-filed">*</span>\n                                        <div class="ztb-field-tooltip">'+(null==(__t=e.field_label)?"":__t)+"</div>\n                                    </div>\n                                    ",fieldPosition="left"==fieldPosition?"right":"left";break;case"dropdown":if(void 0!==e.field_value){l=e.field_value.split("\n");__p+='\n                                    <div id="'+(null==(__t=i)?"":__t)+'-wrapper" class="ztb-field-wrapper '+(null==(__t="left"==fieldPosition?"ztb-field-right":"ztb-field-left")?"":__t)+'" field-type="'+(null==(__t=e.field_type)?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'">\n                                        <div for="company" class="bcf-tooltip">\n                                            <span>Please enter your website</span>\n                                        </div>\n                                        <select  id="'+(null==(__t=i)?"":__t)+'" data-label="'+(null==(__t=e.field_label)?"":__t)+'" type="dropdown" data-name="'+(null==(__t=e.field_name)?"":__t)+'" class="ztb-item ztb-field ztb-custom-field-input" data-field="'+(null==(__t=e.status)?"":__t)+'" name="'+(null==(__t=e.field_type)?"":__t)+"_"+(null==(__t=t)?"":__t)+'" tabindex='+(null==(__t=n)?"":__t)+">\n                                            <option selected >"+(null==(__t=e.field_label)?"":__t)+"</option>\n                                            ",_.each(l,function(e){__p+='\n                                                <option value="'+(null==(__t=e)?"":__t)+'">'+(null==(__t=e)?"":__t)+"</option>\n                                                "}),__p+='\n                                        </select>\n                                        \x3c!-- <span class="ztb-field-icon '+(null==(__t=e.icon)?"":__t)+'"></span> --\x3e\n                                        <span data-field="'+(null==(__t=e.status)?"":__t)+'" class="require-filed">*</span>\n                                        <div class="ztb-field-tooltip">'+(null==(__t=e.field_label)?"":__t)+"</div>\n                                    </div>\n                                    "}fieldPosition="left"==fieldPosition?"right":"left";break;default:__p+='\n                                    <div id="'+(null==(__t=i)?"":__t)+'-wrapper" class="ztb-field-wrapper '+(null==(__t="left"==fieldPosition?"ztb-field-right":"ztb-field-left")?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'">\n                                        <div for="company" class="bcf-tooltip">\n                                            <span>Please enter your website</span>\n                                        </div>\n                                        <input  id="'+(null==(__t=i)?"":__t)+'" data-name="'+(null==(__t=e.field_name)?"":__t)+'" type="text" name="'+(null==(__t=e.field_type)?"":__t)+"_"+(null==(__t=t)?"":__t)+'" size="50" placeholder="'+(null==(__t=e.field_label)?"":__t)+'" data-field="'+(null==(__t=e.status)?"":__t)+'"  class="ztb-item ztb-field ztb-custom-field-input" data-field="'+(null==(__t=e.status)?"":__t)+'" tabindex='+(null==(__t=n)?"":__t)+'>\n                                        <span data-field="'+(null==(__t=e.status)?"":__t)+'" class="require-filed">*</span>\n                                        <div class="ztb-field-tooltip">'+(null==(__t=e.field_label)?"":__t)+"</div>\n                                    </div>\n                                    ",fieldPosition="left"==fieldPosition?"right":"left"}}),__p+="\n\n                        ",enable_subject_field!=isDisable&&(__p+='\n                        <div id="subject-wrapper" class="ztb-field-wrapper ztb-subject-wrapper">\n                            <div for="subject" class="bcf-tooltip">\n                                <span>Please enter subject</span>\n                            </div>\n                            <input id="subject" type="text" name="subject" maxlength="140" placeholder="'+(null==(__t=subject_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_subject_field)?"":__t)+'"  class="ztb-item ztb-field ">\n                            <span data-field="'+(null==(__t=enable_subject_field)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=subject_field_text)?"":__t)+"</div>\n                        </div>\n                        "),__p+="\n                        ",enable_message!=isDisable&&(__p+='\n                        <div id="message-wrapper" class="ztb-message-wrapper">\n                            <div for="message" class="bcf-tooltip">\n                                <span>Don\'t you have anything to say?</span>\n                            </div>\n                            <textarea id="message" name="message" \n                            id="ztb-message-editor" \n                            cols="50" \n                            placeholder="'+(null==(__t=message_text)?"":__t)+'" \n                            data-field="'+(null==(__t=enable_message)?"":__t)+'" \n                            class="ztb-item ztb-field ztb-message"></textarea>\n                            <span data-field="'+(null==(__t=enable_message)?"":__t)+'" class="require-filed">*</span>\n                            <div class="ztb-field-tooltip">'+(null==(__t=message_text)?"":__t)+"</div>\n                        </div>\n                        "),__p+="\n\n                        ",enable_attach_file_field!=isDisable&&null!=enable_attach_file_field&&(__p+='\n                        \x3c!-- <div class="ztb-field-wrapper ztb-subject-wrapper ztb-attachfile-wrapper">\n                            <div for="company" class="bcf-tooltip">\n                                <span>Please enter subject</span>\n                            </div>\n                            <input type="file" name="attach_file[]" placeholder="'+(null==(__t=attach_file_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_attach_file_field)?"":__t)+'"  class="ztb-item">\n                            <a class="add-more-attachfile" href="javascript:void(0);">Add attach file</a>\n                        </div> --\x3e\n                        <div class="ztb-field-wrapper ztb-subject-wrapper ztb-attachfile-wrapper">\n                            <div for="company" class="bcf-tooltip">\n                                <span>Please enter subject</span>\n                            </div>\n                            <div class="input-attach-file hidden-attach-file">\n                                <span class="zb-all-icon-document"></span>\n                                <label class="attact-file-label"> file name</label>\n                                <span class="zb-all-icon-close"></span>\n                            </div>\n                            <input id="attach_file" type="file" name="attach_file" placeholder="'+(null==(__t=attach_file_field_text)?"":__t)+'" data-field="'+(null==(__t=enable_attach_file_field)?"":__t)+'"  class="ztb-item">\n                            <label class="error-attach-file">Invalid file type</label>\n                            <span class="zb-all-icon-attach"></span>\n                            <label class="add-more-attachfile" href="javascript:void(0);" for="attach_file">'+(null==(__t=attach_file_field_text)?"":__t)+"</label>\n                        </div>\n                        "),__p+='\n                        <div class="send-button-wrapper">\n                            ',_.isEmpty(term_of_service.message)||1!=parseInt(term_of_service.enable)||(__p+='\n                            <div class="privacy-checkbox">\n                                <input id="pricacy-check" type="checkbox" name="privacy-checkbox" value="1" class="filled-in">\n                                <label for="pricacy-check">'+(null==(__t=term_of_service.message)?"":__t)+"</label>\n                            </div>\n                            "),__p+='\n                            <button class="ztb-submit" id="ztb-submit-button">\n                                <span class="ui-dform-span ztb-text-fly">'+(null==(__t=send_button_text)?"":__t)+'</span>\n                                <span class="ui-dform-span ztb-icon-fly '+(null==(__t=send_button_icon)?"":__t)+'">&nbsp;</span>\n                            </button>\n                        </div>\n                    </div>\n                </form>\n                \n                <div class="ztb-tks-mesage">\n                    '+(null==(__t=thank_msg)?"":__t)+"\n                </div>\n            </div>   \n        </div>\n    </div>\n\n    <script type=\"text/javascript\">\n        var ContactForm = function() {\n            this.initialize();\n        }\n        ContactForm.prototype = {\n            initialize: function() {\n                var _super = this;\n                BaseTheme.initFunction();\n                \n                //Resize window\n                Zotabox.addEvent('resize', parent.window, function(e) {\n                    if(ZLightBox != null){\n                        if(ZLightBox.isOpened){\n                            _super.refreshUI();\n                        }\n                    }else{\n                        _super.refreshUI();\n                    }\n                });\n                jQuery.each(jQuery('[field-type=\"date_time\"] input'),function(key,value){\n                    var input = jQuery(value),\n                        allowTime = parseInt(input.attr(\"allow-time\")),\n                        enableTime = 1,\n                        allowTimes = [\n                            '00:00', '00:30', \n                            '01:00', '01:30',\n                            '02:00', '02:30',\n                            '03:00', '03:30',\n                            '04:00', '04:30',\n                            '05:00', '05:30',\n                            '06:00', '06:30',\n                            '07:00', '07:30',\n                            '08:00', '08:30',\n                            '09:00', '09:30',\n                            '10:00', '10:30',\n                            '11:00', '11:30',\n                            '12:00', '12:30',\n                            '13:00', '13:30',\n                            '14:00', '14:30',\n                            '15:00', '15:30',\n                            '16:00', '16:30',\n                            '17:00', '17:30',\n                            '18:00', '18:30',\n                            '19:00', '19:30',\n                            '20:00', '20:30',\n                            '21:00', '21:30',\n                            '22:00', '22:30',\n                            '23:00', '23:30',\n                        ];\n                    var dateTimeConfig = {\n                        minDate: false,\n                        format:(DOMAIN.date_format == 'D/M/Y') ? 'd/m/Y' : 'm/d/Y',\n                        hours: true,\n                        minutes: true,\n                        timepicker: false,\n                        id: jQuery(value).attr(\"name\"),\n                        onShow: function(e){\n                            _super.checkCalendarPosition(jQuery(value));\n                        },\n                        onChangeDateTime: function(e){\n                            var input = jQuery(value);\n                            if(!_.isEmpty(input.val()) && input.val() != input.find(\"option:hidden\").val() && input.is(\":focus\")){\n                                input.siblings(\".ztb-field-tooltip\").show();\n                            }else{\n                                input.siblings(\".ztb-field-tooltip\").hide();\n                            }\n                        },\n                        onSelectTime: function(){\n                            if(ZBLib.isMobile()){\n                                setTimeout(function(){\n                                    jQuery(\"#\"+jQuery(value).attr(\"name\")).show();\n                                },0);\n                            }\n                        }\n                    };\n                    if(allowTime == enableTime){\n                        dateTimeConfig.allowTimes = allowTimes;\n                        dateTimeConfig.timepicker = true;\n                        dateTimeConfig.format = (DOMAIN.date_format == 'D/M/Y') ? 'd/m/Y H:i' : 'm/d/Y H:i';\n                    }\n                    jQuery(value).datetimepicker(dateTimeConfig);\n                });\n                jQuery(\".icon-calendar\").click(function(e){\n                    jQuery(e.currentTarget).parent(\".ztb-field-wrapper\").find(\".ztb-date-time\").focus();\n                });\n\n                //add more attach file\n                window.UPLOADING = false;\n                jQuery(\"#attach_file\").unbind('change').bind('change',function(e){\n                    if(typeof window.FILE_LIST == 'undefined'){\n                        window.FILE_LIST = [];\n                    }\n                    window.UPLOADING = true;\n                    if(window.FILE_LIST.length < 5 && jQuery(\".input-attach-file\").length < 6){\n                        var fileInfo = jQuery(e.currentTarget).prop('files')[0];\n                        var checkFileValid = BaseTheme.checkFileValid(fileInfo);\n                        if(checkFileValid.error == false && !_.isEmpty(fileInfo.type)){\n                            jQuery(\".error-attach-file\").hide();\n                            _super.checkFileExist(fileInfo);\n                            // window.FILE_LIST.push(jQuery(e.currentTarget).prop('files')[0]);\n                            var attachInput = jQuery(jQuery('.input-attach-file')[0]).clone().removeClass('hidden-attach-file');\n                            jQuery('.ztb-attachfile-wrapper').append(attachInput);\n                            var lastLabel = jQuery('.input-attach-file:last-child .attact-file-label');\n                            lastLabel.siblings(\".zb-all-icon-close\").addClass(\"disabled\");\n                            lastLabel.html(jQuery(e.currentTarget).prop('files')[0].name);\n                            lastLabel.addClass(\"progress-bar-strip\");\n                            //upload file\n                            var form_data = new FormData();\n                            form_data.append('domainId', '"+(null==(__t=domain_id)?"":__t)+"');\n                            form_data.append('widgetId', '"+(null==(__t=widget_id)?"":__t)+"');\n                            form_data.append('customerId', Zotabox.getData().customer.id);\n                            form_data.append('uniquePath', Zotabox["+(null==(__t=widget_id)?"":__t)+' + "uniquePath"]);\n                            form_data.append(\'file\', jQuery(e.currentTarget).prop(\'files\')[0]);\n                            jQuery.ajax({\n                                url: ZOTABOX.actions + \'/form/file\',\n                                type: "post",\n                                cache: false,\n                                contentType: false,\n                                processData: false,\n                                data: form_data,\n                                success: function(res){\n                                    if(res.success == true){\n                                        var fileObj = {};\n                                        _.each(res,function(value,key){\n                                            if(key != \'success\'){\n                                                fileObj[key] = value;\n                                            }\n                                        });\n                                        window.FILE_LIST.push(fileObj);\n                                    }\n                                    lastLabel.removeClass("progress-bar-strip");\n                                    if(jQuery(".attact-file-label.progress-bar-strip").length == 0){\n                                        window.UPLOADING = false;\n                                    }\n                                    jQuery.each(jQuery(".input-attach-file"),function(k, v){\n                                        if(jQuery(v).find(".attact-file-label").html() == res.fileName){\n                                            jQuery(v).find(".disabled").removeClass("disabled");\n                                        }\n                                    });\n                                },\n                                error: function(){\n                                    lastLabel.removeClass("progress-bar-strip");\n                                    if(jQuery(".attact-file-label.progress-bar-strip").length == 0){\n                                        window.UPLOADING = false;\n                                    }\n                                    jQuery(".zb-all-icon-close").removeClass("disabled");\n                                }\n                            });\n                        }else{\n                            //show message invalid attach file\n                            var errorAttachLabel = jQuery(".error-attach-file");\n                            errorAttachLabel.removeClass(\'radio-invalid\');\n                            errorAttachLabel.html(checkFileValid.message);\n                            errorAttachLabel.fadeIn();\n                            errorAttachLabel.addClass(\'radio-invalid\');\n                            setTimeout(function(){\n                                errorAttachLabel.removeClass(\'radio-invalid\');\n                            },3000);\n                            if(jQuery(".attact-file-label.progress-bar-strip").length == 0){\n                                window.UPLOADING = false;\n                            }\n                        }\n                        \n                    }else{\n                        jQuery(".add-more-attachfile,.zb-all-icon-attach").hide();\n                    }\n                    if(window.FILE_LIST.length >= 5 || jQuery(".input-attach-file").length >= 6){\n                        jQuery(".add-more-attachfile,.zb-all-icon-attach").hide();\n                    }\n                    _super.refreshUI();\n                });\n\n                //remove attach file\n                var listItem = jQuery(".input-attach-file");\n                jQuery(document).on("click",".input-attach-file .zb-all-icon-close",function(e){\n                    jQuery(".error-attach-file").hide();\n                    var fileIndex = jQuery(".input-attach-file").index(jQuery(e.currentTarget).parent(".input-attach-file"));\n                    window.FILE_LIST.splice(fileIndex-1,1);\n                    jQuery(e.currentTarget).parent(".input-attach-file").remove();\n                    jQuery(".add-more-attachfile,.zb-all-icon-attach").show();\n                    jQuery("#attach_file").val(\'\');\n                    _super.refreshUI();\n                });\n            },\n\n            refreshUI: function() {\n                //Set title font size\n                BaseTheme.setFontSize();\n\n                //Remove thank you message\n                document.getElementById("ztb-form-wrapper").classList.remove("success-form");\n\n                //Set popup width\n                BaseTheme.updateSizePopup(ZLightBox ? ZLightBox.UUID : null);\n            },\n            checkFileExist: function(fileInfo){\n                var _super = this;\n                //tim file da co chua\n                jQuery.each(jQuery(".input-attach-file"),function(k, v){\n                    if(jQuery(v).find(".attact-file-label").html() == fileInfo.name){\n                        //da co thi xoa\n                        jQuery(v).remove();\n                        var interval = setInterval(function(){\n                            jQuery.each(window.FILE_LIST,function(key, value){\n                                if(value != undefined && fileInfo.name == value.fileName){\n                                    window.FILE_LIST.splice(key,1);\n                                    _super.refreshUI();\n                                    clearInterval(interval);\n                                }\n                            });\n                        },100);\n                    }\n                });\n            },\n            checkCalendarPosition: function(inputElm){\n                var calenderHeight = 194,\n                    contentHeight = jQuery("#ztb-cf-container").height();\n                if(contentHeight - inputElm.offset().top < calenderHeight){\n                    //set calender top\n                    if(inputElm.offset().top < calenderHeight){\n                        //set calender top 0\n                        setTimeout(function(){\n                            jQuery(".xdsoft_datetimepicker").css("top",0);\n                        },0);\n                    }else{\n                        var calenderTop = inputElm.offset().top - calenderHeight;\n                        setTimeout(function(){\n                            jQuery(".xdsoft_datetimepicker").css("top",calenderTop+"px");\n                        },0);\n                    }\n                }\n            }\n        }\n        window.onload = function() {\n            window.ContactFormBox = new ContactForm();\n            if (window.onrender) {\n                window.onrender();\n            }\n        }\n    <\/script>\n    <style type="text/css">/*<![CDATA[*/'+(null==(__t=base_custom_css)?"":__t)+'/*]]>*/</style>\n    <style type="text/css">/*<![CDATA[*/'+(null==(__t=custom_css)?"":__t)+"/*]]>*/</style>\n</body>\n</html>"}return __p},trigger:function(obj){obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;function print(){__p+=__j.call(arguments,"")}with(obj){var tab_text_icon=tab_icon;switch("icon-tab-icon-none"==tab_icon&&(tab_text_icon="icon-ztb-icon-email2"),__p+="\n",~~tab_type){default:case 1:__p+='\n\t<div id="ztb-cf-show-widget" class="ztb-cf-tabbutton '+(null==(__t=tab_style)?"":__t)+'">\n\t\t',"style3"==tab_style&&(__p+='\n\t\t\t<div class="gradient-block"></div>\n\t\t'),__p+='\n\t\t<div class="zb-tab-content">\n\t\t\t',"icon-tab-icon-none"!=tab_icon&&(__p+='\n\t\t\t\t<span class="'+(null==(__t=tab_icon)?"":__t)+' zb-tab-text-icon"></span>\n\t\t\t'),__p+='\n\t\t\t<span class="zb-tab-text">'+(null==(__t=tab_text)?"":__t)+'</span>\n\t\t</div>\n\t\t<div class="ztb-cf-tabicon">\n\t\t\t<span class="'+(null==(__t=tab_text_icon)?"":__t)+' zb-tab-icon"></span>\n\t\t</div>\n\t</div>\n';break;case 2:__p+='\n\t<a href="javascript:void(0);" class="tg btn-x">\n\t\t<span class=" white-icon  icon-075"></span>\n\t</a>\n\t\x3c!-- <a href="http://zotabox.com" title="Zotabox" target="zotabox" class="tg btn-logo"></a> --\x3e\n\t<div id="ztb-cf-show-widget" class="trigger-image">\n\t\t',!1!=!!tab_image&&(__p+='\n\t\t    <img\n\t\t    \tid="ztb-cf-tabimage"\n\t\t\t    width="'+__e(_.first(tab_image.size))+'"\n\t\t\t    height="'+__e(_.last(tab_image.size))+'"\n\t\t\t    src="'+__e(tab_image.cache_path)+'"\n\t\t    >\n\t\t'),__p+='\n\t\t<div class="ztb-cf-tabicon">\n\t\t\t<span class="'+(null==(__t=tab_text_icon)?"":__t)+' zb-tab-icon"></span>\n\t\t</div>\n\t</div>\n'}}return __p}});define("Widgets.ContactForm.Default.CodeName",[],"contact_form");define("Widgets.ContactForm.Default.ClassName",[],"ContactForm");define("Widgets.ContactForm.Default.ThemeName",[],"Default");define("Widgets.ContactForm.Default.Installer",[],function(){return function(callback){DOMAIN=Zotabox.getData().domain;CUSTOMER=Zotabox.getData().customer;ZOTABOX=Zotabox.getDomainURIs();DOMAIN_STATIC_DIR=Zotabox.getDomainURIs().static+'/__'+Zotabox.getConfig().version;DOMAIN_CACHE_DIR=Zotabox.getDomainRoot()+'/'+Zotabox.getConfig().timestamp;_=Zotabox._;async=Zotabox.async;Class=Zotabox.Class;Widget=Zotabox.Widget;DomainRules=Zotabox.DomainRules;Sly=Zotabox.Core.Sly;CookieManager=Zotabox.Core.CookieManager;Request=Zotabox.Core.Request;jQuery=Zotabox.Core.jQuery;Stats=Zotabox.Stats;Zotabox.require(["Widgets.ContactForm.Default.CodeName","Widgets.ContactForm.Default.ClassName","Widgets.ContactForm.Default.ThemeName","Widgets.ContactForm.Default","Widgets.ContactForm.Default.Template"],function(codeName,className,ThemeName,Widget,templates){return callback.apply(this,[null].concat(arguments));});}});}).apply(Zotabox,[Zotabox.require,Zotabox.define]);